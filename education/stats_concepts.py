#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
çµ±è¨ˆæ¦‚å¿µã®åˆ†ã‹ã‚Šã‚„ã™ã„èª¬æ˜ã‚·ã‚¹ãƒ†ãƒ 
ä¸­å­¦ç”Ÿå‘ã‘å¤©æ°—ãƒ‡ãƒ¼ã‚¿çµ±è¨ˆå­¦ç¿’æ”¯æ´
"""

import json
from typing import Dict, List, Any

class StatsConceptExplainer:
    """çµ±è¨ˆæ¦‚å¿µã‚’ä¸­å­¦ç”Ÿã«ã‚‚åˆ†ã‹ã‚Šã‚„ã™ãèª¬æ˜ã™ã‚‹ã‚¯ãƒ©ã‚¹"""
    
    def __init__(self):
        self.concepts = {
            "mean": {
                "name": "å¹³å‡å€¤",
                "simple_explanation": "å…¨éƒ¨ã®æ•°ã‚’è¶³ã—ã¦ã€å€‹æ•°ã§å‰²ã£ãŸå€¤ã ã‚ˆï¼",
                "detailed_explanation": """
                å¹³å‡å€¤ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®ã€ŒçœŸã‚“ä¸­ã‚ãŸã‚Šã€ã‚’è¡¨ã™ä»£è¡¨çš„ãªå€¤ã§ã™ã€‚
                å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¶³ã—åˆã‚ã›ã¦ã€ãƒ‡ãƒ¼ã‚¿ã®å€‹æ•°ã§å‰²ã‚‹ã“ã¨ã§è¨ˆç®—ã—ã¾ã™ã€‚
                
                ä¾‹ï¼šä»Šé€±ã®æœ€é«˜æ°—æ¸©ãŒ [25, 28, 30, 26, 31] åº¦ã ã£ãŸå ´åˆ
                å¹³å‡ = (25 + 28 + 30 + 26 + 31) Ã· 5 = 140 Ã· 5 = 28åº¦
                """,
                "why_important": """
                å¹³å‡å€¤ã‚’çŸ¥ã‚‹ã“ã¨ã§ã€Œã ã„ãŸã„ã©ã®ãã‚‰ã„ã€ãŒåˆ†ã‹ã‚‹ã‚ˆï¼
                å¤©æ°—äºˆå ±ã§ã€Œä»Šé€±ã®å¹³å‡æ°—æ¸©ã€ã¨è¨€ã‚ã‚ŒãŸã‚‰ã€
                æ¥µç«¯ã«æš‘ã„æ—¥ã‚„å¯’ã„æ—¥ãŒã‚ã£ã¦ã‚‚ã€å…¨ä½“çš„ãªå‚¾å‘ãŒåˆ†ã‹ã‚‹ã‚“ã ã€‚
                """,
                "weather_example": {
                    "scenario": "ä»Šé€±ã®æœ€é«˜æ°—æ¸©",
                    "data": [25, 28, 30, 26, 31],
                    "calculation": "å¹³å‡ = (25+28+30+26+31) Ã· 5 = 28åº¦",
                    "insight": "ä»Šé€±ã¯å¹³å‡çš„ã«28åº¦ã®æš–ã‹ã„æ—¥ãŒç¶šã„ãŸã­ï¼"
                }
            },
            
            "median": {
                "name": "ä¸­å¤®å€¤",
                "simple_explanation": "æ•°ã‚’å°ã•ã„é †ã«ä¸¦ã¹ã¦ã€çœŸã‚“ä¸­ã«ã‚ã‚‹å€¤ã ã‚ˆï¼",
                "detailed_explanation": """
                ä¸­å¤®å€¤ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’å°ã•ã„é †ï¼ˆã¾ãŸã¯å¤§ãã„é †ï¼‰ã«ä¸¦ã¹ãŸã¨ãã€
                ã¡ã‚‡ã†ã©çœŸã‚“ä¸­ã«ãã‚‹å€¤ã§ã™ã€‚
                
                ä¾‹ï¼šä»Šé€±ã®æœ€é«˜æ°—æ¸© [25, 28, 30, 26, 31] ã‚’å°ã•ã„é †ã«ä¸¦ã¹ã‚‹ã¨
                [25, 26, 28, 30, 31] â†’ çœŸã‚“ä¸­ã¯28åº¦
                """,
                "why_important": """
                ä¸­å¤®å€¤ã¯ã€Œæ¥µç«¯ãªå€¤ã€ã«å½±éŸ¿ã•ã‚Œã«ãã„ã‚“ã ï¼
                ã‚‚ã—1æ—¥ã ã‘ç•°å¸¸ã«æš‘ã„æ—¥ï¼ˆä¾‹ï¼š40åº¦ï¼‰ãŒã‚ã£ã¦ã‚‚ã€
                ä¸­å¤®å€¤ã¯ã‚ã¾ã‚Šå¤‰ã‚ã‚‰ãªã„ã‹ã‚‰ã€ã€Œæ™®é€šã®æ—¥ã€ãŒã©ã®ãã‚‰ã„ã‹åˆ†ã‹ã‚‹ã‚ˆã€‚
                """,
                "weather_example": {
                    "scenario": "ä»Šé€±ã®æœ€é«˜æ°—æ¸©",
                    "data": [25, 28, 30, 26, 31],
                    "sorted_data": [25, 26, 28, 30, 31],
                    "calculation": "çœŸã‚“ä¸­ï¼ˆ3ç•ªç›®ï¼‰ã®å€¤ = 28åº¦",
                    "insight": "åŠåˆ†ã®æ—¥ã¯28åº¦ä»¥ä¸‹ã€åŠåˆ†ã®æ—¥ã¯28åº¦ä»¥ä¸Šã ã£ãŸã­ï¼"
                }
            },
            
            "mode": {
                "name": "æœ€é »å€¤",
                "simple_explanation": "ä¸€ç•ªå¤šãå‡ºã¦ãã‚‹å€¤ã ã‚ˆï¼",
                "detailed_explanation": """
                æœ€é »å€¤ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®ä¸­ã§æœ€ã‚‚é »ç¹ã«ç¾ã‚Œã‚‹å€¤ã§ã™ã€‚
                ã€Œä¸€ç•ªäººæ°—ã€ã®å€¤ã¨ã‚‚è¨€ãˆã‚‹ã­ã€‚
                
                ä¾‹ï¼šä»Šé€±ã®å¤©æ°—ãŒ [æ™´ã‚Œ, æ›‡ã‚Š, æ™´ã‚Œ, é›¨, æ™´ã‚Œ] ã ã£ãŸå ´åˆ
                æœ€é »å€¤ = æ™´ã‚Œï¼ˆ3å›å‡ºç¾ï¼‰
                """,
                "why_important": """
                æœ€é »å€¤ã§ã€Œä¸€ç•ªã‚ˆãã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ãŒåˆ†ã‹ã‚‹ã‚ˆï¼
                å¤©æ°—äºˆå ±ã§ã€Œã“ã®å­£ç¯€ã¯æ™´ã‚ŒãŒå¤šã„ã€ã¨è¨€ã‚ã‚Œã‚‹ã®ã¯ã€
                æœ€é »å€¤ã‚’ä½¿ã£ã¦åˆ¤æ–­ã—ã¦ã„ã‚‹ã‚“ã ã€‚
                """,
                "weather_example": {
                    "scenario": "ä»Šé€±ã®å¤©æ°—",
                    "data": ["æ™´ã‚Œ", "æ›‡ã‚Š", "æ™´ã‚Œ", "é›¨", "æ™´ã‚Œ"],
                    "frequency": {"æ™´ã‚Œ": 3, "æ›‡ã‚Š": 1, "é›¨": 1},
                    "calculation": "æœ€é »å€¤ = æ™´ã‚Œï¼ˆ3å›ï¼‰",
                    "insight": "ä»Šé€±ã¯æ™´ã‚Œã®æ—¥ãŒå¤šã‹ã£ãŸã­ï¼"
                }
            }
        }
    
    def explain_concept(self, concept_name: str) -> Dict[str, Any]:
        """æŒ‡å®šã•ã‚ŒãŸçµ±è¨ˆæ¦‚å¿µã®èª¬æ˜ã‚’è¿”ã™"""
        if concept_name not in self.concepts:
            return {"error": f"æ¦‚å¿µ '{concept_name}' ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}
        
        return self.concepts[concept_name]
    
    def get_all_concepts(self) -> List[str]:
        """åˆ©ç”¨å¯èƒ½ãªçµ±è¨ˆæ¦‚å¿µã®ä¸€è¦§ã‚’è¿”ã™"""
        return list(self.concepts.keys())
    
    def get_concept_comparison(self) -> Dict[str, str]:
        """3ã¤ã®çµ±è¨ˆæ¦‚å¿µã®é•ã„ã‚’æ¯”è¼ƒã—ã¦èª¬æ˜"""
        return {
            "comparison_title": "å¹³å‡å€¤ vs ä¸­å¤®å€¤ vs æœ€é »å€¤",
            "scenario": "ã‚¯ãƒ©ã‚¹ã®ãƒ†ã‚¹ãƒˆã®ç‚¹æ•°: [60, 70, 80, 80, 90, 95, 100]",
            "mean": "å¹³å‡å€¤ = 82.1ç‚¹ï¼ˆå…¨å“¡ã®åˆè¨ˆã‚’äººæ•°ã§å‰²ã£ãŸå€¤ï¼‰",
            "median": "ä¸­å¤®å€¤ = 80ç‚¹ï¼ˆçœŸã‚“ä¸­ã®äººã®ç‚¹æ•°ï¼‰", 
            "mode": "æœ€é »å€¤ = 80ç‚¹ï¼ˆä¸€ç•ªå¤šãå–ã‚‰ã‚ŒãŸç‚¹æ•°ï¼‰",
            "key_insight": """
            åŒã˜ãƒ‡ãƒ¼ã‚¿ã§ã‚‚ã€è¦‹ã‚‹è§’åº¦ã«ã‚ˆã£ã¦é•ã†ã€Œä»£è¡¨å€¤ã€ã«ãªã‚‹ã‚“ã ï¼
            - å¹³å‡å€¤ï¼šå…¨ä½“ã®ãƒãƒ©ãƒ³ã‚¹ã‚’è¦‹ã‚‹
            - ä¸­å¤®å€¤ï¼šçœŸã‚“ä¸­ã®å€¤ã‚’è¦‹ã‚‹  
            - æœ€é »å€¤ï¼šä¸€ç•ªå¤šã„ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¦‹ã‚‹
            
            å¤©æ°—äºˆå ±ã§ã‚‚ã€ç›®çš„ã«å¿œã˜ã¦ä½¿ã„åˆ†ã‘ã¦ã„ã‚‹ã‚ˆï¼
            """
        }

class LearningProgressGuide:
    """æ®µéšçš„å­¦ç¿’ã‚¬ã‚¤ãƒ‰ã‚·ã‚¹ãƒ†ãƒ """
    
    def __init__(self):
        self.learning_steps = [
            {
                "step": 1,
                "title": "ğŸŒ¤ï¸ çµ±è¨ˆã£ã¦ä½•ï¼Ÿ",
                "goal": "çµ±è¨ˆã®åŸºæœ¬çš„ãªè€ƒãˆæ–¹ã‚’ç†è§£ã™ã‚‹",
                "content": """
                çµ±è¨ˆã¯ã€ŒãŸãã•ã‚“ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å‚¾å‘ã‚„ç‰¹å¾´ã‚’è¦‹ã¤ã‘ã‚‹æ–¹æ³•ã€ã ã‚ˆï¼
                
                ä¾‹ãˆã°ï¼š
                - ä»Šé€±ã¯é›¨ãŒå¤šã‹ã£ãŸï¼Ÿå°‘ãªã‹ã£ãŸï¼Ÿ
                - ä»Šå¹´ã®å¤ã¯å»å¹´ã‚ˆã‚Šæš‘ã„ï¼Ÿ
                - æ˜æ—¥ã®å¤©æ°—ã¯ã©ã†ãªã‚Šãã†ï¼Ÿ
                
                ã“ã‚“ãªç–‘å•ã«æ•°å­—ã§ç­”ãˆã‚‹ã®ãŒçµ±è¨ˆãªã‚“ã ï¼
                """,
                "activity": "ä»Šé€±ã®å¤©æ°—ã‚’æ€ã„å‡ºã—ã¦ã€æ™´ã‚Œãƒ»æ›‡ã‚Šãƒ»é›¨ã®æ—¥æ•°ã‚’æ•°ãˆã¦ã¿ã‚ˆã†",
                "hint": "çµ±è¨ˆã¯ã€Œæ•°ã§è¡¨ã™ã“ã¨ã§ã€ç‰©äº‹ã‚’ã‚ˆã‚Šæ­£ç¢ºã«ç†è§£ã™ã‚‹é“å…·ã€ã ã‚ˆ"
            },
            {
                "step": 2,
                "title": "ğŸ“Š ãƒ‡ãƒ¼ã‚¿ã®ä»£è¡¨å€¤ã‚’çŸ¥ã‚ã†",
                "goal": "å¹³å‡å€¤ãƒ»ä¸­å¤®å€¤ãƒ»æœ€é »å€¤ã®é•ã„ã‚’ç†è§£ã™ã‚‹",
                "content": """
                ãƒ‡ãƒ¼ã‚¿ã®ç‰¹å¾´ã‚’è¡¨ã™3ã¤ã®ä»£è¡¨å€¤ã‚’å­¦ã¼ã†ï¼
                
                ğŸ¯ å¹³å‡å€¤ï¼šå…¨éƒ¨ã‚’è¶³ã—ã¦å€‹æ•°ã§å‰²ã‚‹
                ğŸ¯ ä¸­å¤®å€¤ï¼šä¸¦ã¹ã¦çœŸã‚“ä¸­ã®å€¤
                ğŸ¯ æœ€é »å€¤ï¼šä¸€ç•ªå¤šãç¾ã‚Œã‚‹å€¤
                """,
                "activity": "å‹é”5äººã®èº«é•·ã‚’æ¸¬ã£ã¦ã€3ã¤ã®ä»£è¡¨å€¤ã‚’è¨ˆç®—ã—ã¦ã¿ã‚ˆã†",
                "hint": "åŒã˜ãƒ‡ãƒ¼ã‚¿ã§ã‚‚ã€è¦‹æ–¹ã«ã‚ˆã£ã¦é•ã†ã€Œä»£è¡¨å€¤ã€ã«ãªã‚‹ã“ã¨ã‚’ç™ºè¦‹ã—ã‚ˆã†"
            },
            {
                "step": 3,
                "title": "ğŸŒ¡ï¸ å¤©æ°—ãƒ‡ãƒ¼ã‚¿ã§å®Ÿè·µ",
                "goal": "å®Ÿéš›ã®å¤©æ°—ãƒ‡ãƒ¼ã‚¿ã§çµ±è¨ˆã‚’è¨ˆç®—ã—ã¦ã¿ã‚‹",
                "content": """
                å®Ÿéš›ã®å¤©æ°—ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦çµ±è¨ˆã‚’è¨ˆç®—ã—ã¦ã¿ã‚ˆã†ï¼
                
                ä»Šé€±ã®æœ€é«˜æ°—æ¸©ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ï¼š
                - å¹³å‡æ°—æ¸©ã‚’è¨ˆç®—
                - ä¸­å¤®å€¤ã‚’è¦‹ã¤ã‘ã‚‹
                - æœ€ã‚‚å¤šã„æ°—æ¸©ã‚’æ¢ã™
                """,
                "activity": "æ°—è±¡åºã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ã€ã‚ãªãŸã®ä½ã‚“ã§ã„ã‚‹åœ°åŸŸã®æ°—æ¸©ã‚’åˆ†æã—ã¦ã¿ã‚ˆã†",
                "hint": "å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†ã¨ã€çµ±è¨ˆãŒã‚ˆã‚Šèº«è¿‘ã«æ„Ÿã˜ã‚‰ã‚Œã‚‹ã‚ˆ"
            },
            {
                "step": 4,
                "title": "ğŸ” ãƒ‡ãƒ¼ã‚¿ã®å‚¾å‘ã‚’èª­ã¿å–ã‚ã†",
                "goal": "çµ±è¨ˆã‹ã‚‰å¤©æ°—ã®å‚¾å‘ã‚’èª­ã¿å–ã‚‹",
                "content": """
                çµ±è¨ˆã‹ã‚‰ã€Œå‚¾å‘ã€ã‚„ã€Œãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã‚’è¦‹ã¤ã‘ã‚ˆã†ï¼
                
                - ä»Šæœˆã¯å…ˆæœˆã‚ˆã‚Šæš–ã‹ã„ï¼Ÿ
                - é›¨ã®æ—¥ãŒå¤šã„æ›œæ—¥ã¯ã‚ã‚‹ï¼Ÿ
                - å­£ç¯€ã®å¤‰ã‚ã‚Šç›®ã¯ã„ã¤ï¼Ÿ
                """,
                "activity": "1ãƒ¶æœˆåˆ†ã®å¤©æ°—ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€é¢ç™½ã„ç™ºè¦‹ã‚’ã—ã¦ã¿ã‚ˆã†",
                "hint": "çµ±è¨ˆã¯ã€Œãªãœï¼Ÿã€ã‚’è€ƒãˆã‚‹ãã£ã‹ã‘ã‚’ãã‚Œã‚‹ã‚ˆ"
            },
            {
                "step": 5,
                "title": "ğŸ“ çµ±è¨ˆãƒã‚¹ã‚¿ãƒ¼ã«ãªã‚ã†",
                "goal": "å­¦ã‚“ã çµ±è¨ˆã‚’ä½¿ã£ã¦å¤©æ°—ã‚’äºˆæ¸¬ã—ã¦ã¿ã‚‹",
                "content": """
                ãŠã‚ã§ã¨ã†ï¼çµ±è¨ˆã®åŸºæœ¬ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ãŸã­ï¼
                
                ä»Šåº¦ã¯å­¦ã‚“ã ã“ã¨ã‚’ä½¿ã£ã¦ï¼š
                - æ˜æ—¥ã®å¤©æ°—ã‚’äºˆæ¸¬ã—ã¦ã¿ã‚ˆã†
                - æ¥é€±ã®æ°—æ¸©ã‚’æ¨æ¸¬ã—ã¦ã¿ã‚ˆã†
                - å‹é”ã¨äºˆæ¸¬ã‚’æ¯”ã¹ã¦ã¿ã‚ˆã†
                """,
                "activity": "çµ±è¨ˆçš„ãªæ ¹æ‹ ã‚’æŒã£ã¦ã€å¤©æ°—äºˆæ¸¬ã«ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã‚ˆã†",
                "hint": "çµ±è¨ˆã¯æœªæ¥ã‚’äºˆæ¸¬ã™ã‚‹å¼·åŠ›ãªé“å…·ã«ãªã‚‹ã‚ˆ"
            }
        ]
    
    def get_step(self, step_number: int) -> Dict[str, Any]:
        """æŒ‡å®šã•ã‚ŒãŸã‚¹ãƒ†ãƒƒãƒ—ã®å†…å®¹ã‚’è¿”ã™"""
        if step_number < 1 or step_number > len(self.learning_steps):
            return {"error": f"ã‚¹ãƒ†ãƒƒãƒ— {step_number} ã¯å­˜åœ¨ã—ã¾ã›ã‚“"}
        
        return self.learning_steps[step_number - 1]
    
    def get_all_steps(self) -> List[Dict[str, Any]]:
        """å…¨å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¿”ã™"""
        return self.learning_steps
    
    def get_next_step(self, current_step: int) -> Dict[str, Any]:
        """æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¿”ã™"""
        if current_step >= len(self.learning_steps):
            return {"message": "ãŠã‚ã§ã¨ã†ï¼å…¨ã¦ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Œäº†ã—ã¾ã—ãŸï¼ğŸ‰"}
        
        return self.get_step(current_step + 1)

class FeedbackSystem:
    """é”æˆæ„Ÿã‚’ä¸ãˆã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ """
    
    def __init__(self):
        self.achievements = {
            "first_calculation": {
                "title": "ğŸ¯ åˆã‚ã¦ã®è¨ˆç®—",
                "description": "çµ±è¨ˆã®è¨ˆç®—ã‚’åˆã‚ã¦è¡Œã„ã¾ã—ãŸï¼",
                "message": "ã™ã”ã„ï¼çµ±è¨ˆã®ä¸–ç•Œã¸ã®ç¬¬ä¸€æ­©ã ã­ï¼",
                "points": 10
            },
            "concept_master": {
                "title": "ğŸ“š æ¦‚å¿µãƒã‚¹ã‚¿ãƒ¼", 
                "description": "3ã¤ã®ä»£è¡¨å€¤ã®é•ã„ã‚’ç†è§£ã—ã¾ã—ãŸï¼",
                "message": "å¹³å‡å€¤ãƒ»ä¸­å¤®å€¤ãƒ»æœ€é »å€¤ã‚’ä½¿ã„åˆ†ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã­ï¼",
                "points": 25
            },
            "data_analyst": {
                "title": "ğŸ” ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒŠãƒªã‚¹ãƒˆ",
                "description": "å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã¾ã—ãŸï¼",
                "message": "æœ¬ç‰©ã®ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆã¿ãŸã„ã ã­ï¼",
                "points": 30
            },
            "weather_predictor": {
                "title": "ğŸŒ¤ï¸ å¤©æ°—äºˆå ±å£«",
                "description": "çµ±è¨ˆã‚’ä½¿ã£ã¦å¤©æ°—ã‚’äºˆæ¸¬ã—ã¾ã—ãŸï¼",
                "message": "å›ã‚‚ç«‹æ´¾ãªå¤©æ°—äºˆå ±å£«ã®ä»²é–“å…¥ã‚Šã ï¼",
                "points": 50
            },
            "stats_wizard": {
                "title": "ğŸ§™â€â™‚ï¸ çµ±è¨ˆã®é­”æ³•ä½¿ã„",
                "description": "å…¨ã¦ã®å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Œäº†ã—ã¾ã—ãŸï¼",
                "message": "ãŠã‚ã§ã¨ã†ï¼çµ±è¨ˆã®é­”æ³•ã‚’ä½¿ã„ã“ãªã›ã‚‹ã‚ˆã†ã«ãªã£ãŸã­ï¼",
                "points": 100
            }
        }
    
    def get_achievement(self, achievement_id: str) -> Dict[str, Any]:
        """æŒ‡å®šã•ã‚ŒãŸé”æˆé …ç›®ã‚’è¿”ã™"""
        if achievement_id not in self.achievements:
            return {"error": f"é”æˆé …ç›® '{achievement_id}' ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}
        
        return self.achievements[achievement_id]
    
    def generate_encouragement(self, progress_percent: float) -> str:
        """é€²æ—ç‡ã«å¿œã˜ãŸåŠ±ã¾ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆ"""
        if progress_percent < 20:
            return "ğŸŒ± ç´ æ™´ã‚‰ã—ã„ã‚¹ã‚¿ãƒ¼ãƒˆã ã­ï¼çµ±è¨ˆã®ä¸–ç•Œã¸ã‚ˆã†ã“ãï¼"
        elif progress_percent < 40:
            return "ğŸŒ¿ é †èª¿ã«æˆé•·ã—ã¦ã„ã‚‹ã‚ˆï¼ã“ã®èª¿å­ã§é ‘å¼µã‚ã†ï¼"
        elif progress_percent < 60:
            return "ğŸŒ³ ã‚‚ã†åŠåˆ†ä»¥ä¸Šé€²ã‚“ã ã­ï¼çµ±è¨ˆãŒé¢ç™½ããªã£ã¦ããŸï¼Ÿ"
        elif progress_percent < 80:
            return "ğŸ† ã»ã¼ã‚´ãƒ¼ãƒ«ãŒè¦‹ãˆã¦ããŸã‚ˆï¼ã‚ã¨å°‘ã—ã§çµ±è¨ˆãƒã‚¹ã‚¿ãƒ¼ã ï¼"
        else:
            return "ğŸ‰ ãŠã‚ã§ã¨ã†ï¼çµ±è¨ˆã®é”äººã«ãªã£ãŸã­ï¼ç´ æ™´ã‚‰ã—ã„æˆæœã ã‚ˆï¼"
    
    def get_hint_for_difficulty(self, concept: str, difficulty_level: str) -> str:
        """é›£æ˜“åº¦ã«å¿œã˜ãŸãƒ’ãƒ³ãƒˆã‚’æä¾›"""
        hints = {
            "mean": {
                "easy": "å…¨éƒ¨ã®æ•°ã‚’è¶³ã—ã¦ã€å€‹æ•°ã§å‰²ã‚‹ã ã‘ã ã‚ˆï¼",
                "medium": "æ¥µç«¯ã«å¤§ãã„å€¤ã‚„å°ã•ã„å€¤ãŒã‚ã‚‹ã¨ã€å¹³å‡å€¤ã¯å½±éŸ¿ã‚’å—ã‘ã‚„ã™ã„ã‚ˆ",
                "hard": "åŠ é‡å¹³å‡ã‚’ä½¿ã†ã¨ã€é‡è¦ãªãƒ‡ãƒ¼ã‚¿ã«ã‚ˆã‚Šé‡ã¿ã‚’ä»˜ã‘ã‚‰ã‚Œã‚‹ã‚ˆ"
            },
            "median": {
                "easy": "ã¾ãšæ•°ã‚’å°ã•ã„é †ã«ä¸¦ã¹ã¦ã€çœŸã‚“ä¸­ã‚’è¦‹ã¤ã‘ã‚ˆã†ï¼",
                "medium": "ãƒ‡ãƒ¼ã‚¿ãŒå¶æ•°å€‹ã®å ´åˆã¯ã€çœŸã‚“ä¸­2ã¤ã®å¹³å‡ã‚’å–ã‚‹ã‚ˆ",
                "hard": "å¤–ã‚Œå€¤ã«å½±éŸ¿ã•ã‚Œã«ãã„ã®ã§ã€ãƒ­ãƒã‚¹ãƒˆãªçµ±è¨ˆé‡ã¨å‘¼ã°ã‚Œã‚‹ã‚ˆ"
            },
            "mode": {
                "easy": "ä¸€ç•ªå¤šãå‡ºã¦ãã‚‹å€¤ã‚’æ¢ãã†ï¼",
                "medium": "æœ€é »å€¤ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã‚‚ã‚ã‚‹ã‚ˆï¼ˆå¤šå³°æ€§ï¼‰",
                "hard": "ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å ´åˆã€æœ€é »å€¤ãŒæœ€ã‚‚æ„å‘³ã®ã‚ã‚‹ä»£è¡¨å€¤ã«ãªã‚‹ã‚ˆ"
            }
        }
        
        return hints.get(concept, {}).get(difficulty_level, "é ‘å¼µã£ã¦è€ƒãˆã¦ã¿ã‚ˆã†ï¼")

def main():
    """ãƒ¡ã‚¤ãƒ³é–¢æ•°ï¼šæ•™è‚²ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"""
    print("ğŸŒ¤ï¸ å¤©æ°—ãƒ‡ãƒ¼ã‚¿çµ±è¨ˆå­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ  ğŸŒ¤ï¸")
    print("=" * 50)
    
    # çµ±è¨ˆæ¦‚å¿µã®èª¬æ˜
    explainer = StatsConceptExplainer()
    print("\nğŸ“š çµ±è¨ˆæ¦‚å¿µã®èª¬æ˜:")
    for concept in explainer.get_all_concepts():
        explanation = explainer.explain_concept(concept)
        print(f"\n{explanation['name']}: {explanation['simple_explanation']}")
    
    # å­¦ç¿’ã‚¬ã‚¤ãƒ‰
    guide = LearningProgressGuide()
    print("\nğŸ¯ å­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—:")
    for step in guide.get_all_steps():
        print(f"Step {step['step']}: {step['title']}")
    
    # ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ 
    feedback = FeedbackSystem()
    print("\nğŸ† é”æˆå¯èƒ½ãªç§°å·:")
    for achievement_id, achievement in feedback.achievements.items():
        print(f"- {achievement['title']}: {achievement['description']}")
    
    print("\nğŸ‰ å­¦ç¿’ã‚’å§‹ã‚ã‚‹æº–å‚™ãŒã§ãã¾ã—ãŸï¼")

if __name__ == "__main__":
    main()